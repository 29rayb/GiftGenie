"use strict";function AppRoutes(e,t,o,i){t.otherwise("/"),e.state("faq",{url:"/faq",templateUrl:"app/components/faq/faq.html",controller:"faqCtrl",resolve:{getUser:function(e){return e.getProfile()}}}).state("home",{url:"/",templateUrl:"app/components/home/home.html",controller:"HomeCtrl"}).state("my-wishlist",{url:"/my-wishlist/:id",templateUrl:"app/components/my-wishlist/my-wishlist.html",controller:"WishlistCtrl"}).state("friend-wishlist",{url:"/my-wishlist/:id/friends/:fid",templateUrl:"app/components/friend-wishlist/friend-wishlist.html",controller:"FriendlistCtrl",resolve:{getUser:function(e){return e.getProfile()}}}).state("settings",{url:"/settings/:id",templateUrl:"app/components/settings/settings.html",controller:"SettingsCtrl"}).state("starred-lists",{url:"/starred-lists/:id",templateUrl:"app/components/starred-lists/starred-lists.html",controller:"StarredCtrl",resolve:{getUser:function(e){return e.getProfile()}}}),i.facebook({clientId:"247255738962232",requiredUrlParams:["scope"],scope:["user_friends","email","user_birthday","user_likes"]})}function NavSvc(e){}function StarSvc(e){return{get_friends:function(){return e.get("/api/me/friends")}}}function UserSvc(e){return{getProfile:function(){return e.get("/api/me")},friendProfile:function(t){return e.post("/api/friend",{params:{fid:t}})},add_new:function(t){var t;return e.post("/api/me/items",t)},delete_item:function(t,o){return e.put("/api/me/items/delete",t)},save_changes:function(t){var t;return e.put("/api/me/items/edit",t)},starPerson:function(t){return e.put("/api/me/star",t)},saveOrder:function(t){return e.put("/api/me/items/order",t)},likeItem:function(t){return e.put("/api/items/liked",t)},showFavoritesData:function(){return e.get("/api/favorites/data")},followPerson:function(t){return e.put("/api/me/following",t)},makePrivate:function(t){return e.put("/api/me/makePrivate")}}}function FriendlistCtrl(e,t,o,i,a,r,n,l,s){var d=s.data.favorites,f=s.data.following;n.display_name=s.data.displayName;var u=l.fid,c=s.data.liked;r.friendProfile(u).then(function(t){e.user=t.data.user,e.id=t.data.user._id,e.birthday=t.data.user.birthday,e.display_name=t.data.user.displayName,e.email=t.data.user.email,e.pro_pic=t.data.user.facebook,e.items=t.data.items,e.friendsLengthh=t.data.user.friends.length,e.allFriendFriends=t.data.user.friends,e.following=t.data.user.following.length,e.followers=t.data.user.followers.length;for(var o=t.data.user.items,i=[],a=0;a<o.length;a++){var r=o[a];c.indexOf(r)>-1&&(i.push(a),e.like_heart=i)}var l=t.data.user._id;d.indexOf(l)>-1&&(n.yellowStar="star_btn"),f.indexOf(e.id)>-1?n.follow=!0:n.follow=!1;for(var s=[],a=0;a<t.data.user.friends.length;a++){var u=t.data.user.friends[a].name;s.push(u)}e.friends=s,e.friendsLength=s.length})["catch"](function(e){}),e.like_item=function(t,o){if(void 0!=e.like_heart&&e.like_heart.indexOf(o)>-1){var i=parseInt(o),a=e.like_heart;a.splice(a.indexOf(i),1)}else void 0==e.like_heart?(e.like_heart=[],e.like_heart.push(o)):void 0!=e.like_heart&&e.like_heart.push(o);r.likeItem(t).then(function(e){})["catch"](function(e){})},e.star=function(e){void 0===n.yellowStar?n.yellowStar="star_btn":n.yellowStar=void 0,r.starPerson(e)},e.followUser=function(t){var o=t._id;f.indexOf(o)>-1?(f.pop(o),e.unfollow=!1):(f.push(o),window.location.reload()),r.followPerson(t)},e.unfollowBtnShow=function(){n.follow=!1,n.unfollow=!0},e.followBtnShow=function(){n.follow=!0,n.unfollow=!1},e.goToFollowing=function(){t.go("following")},e.goToFollowers=function(){t.go("followers")}}function faqCtrl(e,t,o){e.display_name=o.data.displayName,t.faqs=[{question:"1. Why arent my links working?",answer:"Make sure you have the http(s):/ /www; The best way to accomplish copying the links is by copying the url & simply plasting it in the input box."},{question:"2. 2nd",answer:"2nd"},{question:"3. 3rd",answer:"3rd"}],t.getAnswer=function(){t.showAnswer?t.showAnswer=!1:t.showAnswer=!0}}function HomeCtrl(e,t,o,i,a,r){r.loggedIn=localStorage.getItem("satellizer_token"),localStorage.getItem("satellizer_token")&&a.getProfile().then(function(e){r.display_name=e.data.displayName}),e.authenticate=function(e,i){o.authenticate(e,i).then(function(e){a.getProfile().then(function(e){var o=e.data.facebook;t.go("my-wishlist",{id:o})})["catch"](function(e){})})["catch"](function(e){})}}function WishlistCtrl(e,t,o,i,a,r,n,l){return e.id=l.id,n.fbook=l.facebook,e.settings=!1,e.followersPage=!1,e.followingPage=!1,e.like_heart=!1,e.favoriteWishlist=!1,o.isAuthenticated()?(r.getProfile().then(function(t){n.user=t.data,n.id=t.data._id,n.birthday=t.data.birthday,n.display_name=t.data.displayName,n.email=t.data.email,n.pro_pic=t.data.facebook,n.items=t.data.items,n.friends=t.data.friends[0].name,n.friendsLength=t.data.friends.length,n.favorites=t.data.favorites,e.followersCount=t.data.followers.length,e.followingCount=t.data.following.length,e.privacy=t.data["private"],n.followersModel=[],n.followingModel=[],e.followingArr=t.data.following;for(var o=0;o<e.followingCount;o++)n.followingModel[o]={name:t.data.friends[o].name,id:t.data.friends[o].id};e.followersArr=t.data.following;for(var o=0;o<e.followersCount;o++)n.followersModel[o]={name:t.data.friends[o].name,id:t.data.friends[o].id}})["catch"](function(e){}),e.add=function(t,o){e.name=t.name,e.link=t.link;var i=e.user._id;e.item.user=i,r.add_new(t).then(function(){e.items.push({name:e.name,link:e.link,user:i}),e.item.name="",e.item.link=""})["catch"](function(e){}),swal({title:"Good job!",text:"You added the item!",type:"success",timer:2e3}),window.location.reload(!0)},e.like_item=function(e){r.likeItem(e)},e.edit=function(t){e.item={},e.item.link=t.link,e.item.name=t.name,e.editItemId=t._id},e.save_changes=function(t,o){e.item.name=t.name,e.item.link=t.link,e.item.id=o,r.save_changes(t).then(function(){window.location.reload(!0)})["catch"](function(){})},e["delete"]=function(t,o){e.items.splice(o,1),r.delete_item(t,o)},e.star=function(e){r.starPerson(e)},e.goToSettings=function(){e.settings=!0,e.followersPage=!1,e.followingPage=!1,e.makePrivate=function(){var t=n.user;r.makePrivate(t),e["private"]=!0,e["public"]=!1},e.makePublic=function(){e["private"]=!1,e["public"]=!0}},e.backToWlist=function(){e.settings=!1,e.followersPage=!1,e.followingPage=!1},e.sort_list=function(){var t=e.items;r.saveOrder(t)},e.sortableOptions={update:function(t,o){e.sort_list()},axis:"y"},e.goToFollowing=function(){e.followingPage=!0,e.followersPage=!1,e.settings=!1},e.goToFollowers=function(){e.followersPage=!0,e.followingPage=!1,e.settings=!1},void(e.goToOthers=function(e){r.getProfile().then(function(o){var i=o.data.facebook;t.go("friend-wishlist",{id:i,fid:e.id})})})):t.go("home")}function NavbarCtrl(e,t,o,i,a,r){e.isAuthenticated=function(){return i.isAuthenticated()},e.logout=function(){r.loggedIn=void 0,i.logout(),t.go("home")},e.goToWishList=function(){a.getProfile().then(function(e){var o=e.data.facebook;t.go("my-wishlist",{id:o})})},e.goToOthers=function(e){a.getProfile().then(function(o){var i=o.data.facebook;t.go("friend-wishlist",{id:i,fid:e.id})})},e.searchFriends=function(){var e=r.friendsLength;r.userModel=[],a.getProfile().then(function(t){for(var o=0;o<e;o++)r.userModel[o]={name:t.data.friends[o].name,id:t.data.friends[o].id}})},e.focused=function(){e.friendsContainer=!0,e.searchFriends()},e.blurred=function(){e.friendsContainer=!1}}function StarredCtrl(e,t,o,i,a,r,n,l,s,d){return o.isAuthenticated()?(r.showFavoritesData().then(function(t){var o=t.data.user.favorites.length,i=t.data.favoritesData;e.favsModel=[];for(var a=0;a<o;a++)e.favsModel[a]={name:i[a].displayName,id:i[a].facebook}})["catch"](function(e){}),e.goToOthers=function(e){r.getProfile().then(function(o){var i=o.data.facebook;t.go("friend-wishlist",{id:i,fid:e.id})})},e.star=function(){},d.display_name=s.data.displayName,d.email=s.data.email,d.birthday=s.data.birthday,d.favorites=s.data.favorites,e.friendsContainer=!0,void(e.show_user_info=function(){e.clicked_card?e.clicked_card=!1:e.clicked_card=!0})):t.go("home")}angular.module("App",["ui.router","satellizer","app.routes","ui.sortable"]),angular.module("app.routes",[]).config(["$stateProvider","$urlRouterProvider","$locationProvider","$authProvider",AppRoutes]),angular.module("App").service("NavSvc",NavSvc),NavSvc.$inject=["$http"],angular.module("App").factory("StarSvc",StarSvc),StarSvc.$inject=["$http"],angular.module("App").factory("UserSvc",UserSvc),UserSvc.$inject=["$http"],angular.module("App").controller("FriendlistCtrl",["$scope","$state","$auth","$http","$window","UserSvc","$rootScope","$stateParams","getUser",FriendlistCtrl]),angular.module("App").controller("faqCtrl",["$rootScope","$scope","getUser",faqCtrl]),angular.module("App").controller("HomeCtrl",["$scope","$state","$auth","$http","UserSvc","$rootScope",HomeCtrl]),angular.module("App").controller("WishlistCtrl",["$scope","$state","$auth","$http","$window","UserSvc","$rootScope","$stateParams",WishlistCtrl]),angular.module("App").controller("NavbarCtrl",["$scope","$state","NavSvc","$auth","UserSvc","$rootScope",NavbarCtrl]),angular.module("App").controller("StarredCtrl",["$scope","$state","$auth","$http","$window","UserSvc","StarSvc","$stateParams","getUser","$rootScope",StarredCtrl]),angular.module("App").controller("ProfileCardCtrl",function(e){}).directive("profile-card",function(){return{restrict:"E",controller:"ProfileCardCtrl",templateUrl:"app/shared/profile-card/profile-card.html",link:function(e,t,o){}}});